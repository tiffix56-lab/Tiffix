### Subscription Management API Tests

# Base URL
@baseUrl = http://localhost:4000/v1
@token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ODllMmE1ZTI2NzQyODAwODMyMjA0NGMiLCJlbWFpbCI6InVzZXJAZ21haWwuY29tIiwidXNlclR5cGUiOiJ1c2VyIiwicm9sZSI6InVzZXIiLCJpYXQiOjE3NTY0NzU4MjksImV4cCI6MTc1NjU2MjIyOX0.pDl39D2vtzOqyaEcABJhIjwmb7UAMT8MqgFxJUNkRUs
@adminToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ODk2MzBkYjI3Y2I3OWM0YTFiMzJjM2UiLCJlbWFpbCI6ImFkbWluQGdtYWlsLmNvbSIsInVzZXJUeXBlIjoiYWRtaW4iLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NTY0NzE5NzUsImV4cCI6MTc1NjU1ODM3NX0.7aiSH61kqazHOxVLyc32zJR30VBGyV9JLNKhUtq-yUE
@subscriptionId = 689ddbe0bd0e72f74f580a50
@menuId = 689ddbe0bd0e72f74f580a51

### ========================================
### PUBLIC SUBSCRIPTION ROUTES (User Access)
### ========================================

### Get Active Subscriptions with Filters (User)
GET {{baseUrl}}/subscriptions?page=1&limit=10&category=home_chef&duration=monthly&minPrice=500&maxPrice=2000
Content-Type: application/json
Authorization: Bearer {{token}}

### Get Subscription Details by ID (User)
GET {{baseUrl}}/subscriptions/{{subscriptionId}}
Content-Type: application/json
Authorization: Bearer {{token}}

### ========================================
### ADMIN SUBSCRIPTION MANAGEMENT
### ========================================

### Create a New Subscription Plan (Admin)
POST {{baseUrl}}/admin/subscriptions
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "planName": "Premium Monthly Plan",
  "duration": "monthly",
  "durationDays": 30,
  "mealTimings": {
    "isLunchAvailable": true,
    "isDinnerAvailable": true,
    "lunchOrderWindow": {
      "startTime": "11:00",
      "endTime": "16:00"
    },
    "dinnerOrderWindow": {
      "startTime": "19:00",
      "endTime": "23:00"
    }
  },
  "mealsPerPlan": 60,
  "userSkipMealPerPlan": 6,
  "originalPrice": 2500,
  "discountedPrice": 2000,
  "category": "home_chef",
  "freeDelivery": true,
  "description": "A premium monthly plan with lunch and dinner options",
  "features": ["Customizable meals", "Priority delivery"],
  "terms": "Non-refundable after 7 days",
  "tags": ["premium", "monthly"],
  "planMenus": ["{{menuId}}"]
}

### Get All Subscription Plans with Filters (Admin)
GET {{baseUrl}}/admin/subscriptions?page=1&limit=10&category=home_chef&isActive=true&duration=monthly&minPrice=500&maxPrice=3000&search=Premium&sortBy=createdAt&sortOrder=desc
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### Get Subscription Details by ID (Admin)
GET {{baseUrl}}/admin/subscriptions/{{subscriptionId}}
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### Update Subscription Plan (Admin)
PUT {{baseUrl}}/admin/subscriptions/{{subscriptionId}}
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "planName": "Updated Premium Monthly Plan",
  "duration": "monthly",
  "durationDays": 30,
  "mealTimings": {
    "isLunchAvailable": true,
    "isDinnerAvailable": true,
    "lunchOrderWindow": {
      "startTime": "10:00",
      "endTime": "15:00"
    },
    "dinnerOrderWindow": {
      "startTime": "18:00",
      "endTime": "22:00"
    }
  },
  "mealsPerPlan": 60,
  "userSkipMealPerPlan": 6,
  "originalPrice": 2600,
  "discountedPrice": 2200,
  "category": "home_chef",
  "freeDelivery": true,
  "description": "Updated premium monthly plan with enhanced features",
  "features": ["Customizable meals", "Priority delivery", "Free snacks"],
  "terms": "Non-refundable after 5 days",
  "tags": ["premium", "monthly", "updated"],
  "planMenus": ["{{menuId}}"]
}

### Delete Subscription Plan (Admin)
DELETE {{baseUrl}}/admin/subscriptions/{{subscriptionId}}
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### Toggle Subscription Status (Admin)
PATCH {{baseUrl}}/admin/subscriptions/{{subscriptionId}}/toggle-status
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### Get Subscription Statistics (Admin)
GET {{baseUrl}}/admin/subscriptions/stats
Content-Type: application/json
Authorization: Bearer {{adminToken}}